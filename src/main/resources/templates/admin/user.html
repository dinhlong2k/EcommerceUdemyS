<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/fontawesome/all.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <title>Admin Management</title>
</head>
<body>
<div>
    <div class="vertical-nav bg-white" id="sidebar">
        <div class="py-4 px-3 mb-4 bg-light">
            <!--<div class="media d-flex align-items-center"><img src="https://res.cloudinary.com/mhmd/image/upload/v1556074849/avatar-1_tcnd60.png" alt="..." width="65" class="mr-3 rounded-circle img-thumbnail shadow-sm">
                <div class="media-body">
                    <h4 class="m-0">Jason Doe</h4>
                    <p class="font-weight-light text-muted mb-0">Web developer</p>
                </div>
            </div>-->
            <div>
                <a class="navbar-brand" th:href="@{/}">
                    <img th:src="@{/images/tinder.svg}" width="70px" height="60px" >
                </a>
            </div>
        </div>

        <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0"><h3>Manage</h3></p>

        <ul class="nav flex-column bg-white mb-0">
            <li class="nav-item">
                <a th:href="@{/admin/adminpage}" class="nav-link text-dark font-roboto bg-light">
                    <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
                    Home
                </a>
            </li>
            <li class="nav-item">
                <a th:href="@{/admin/users}" class="nav-link text-dark font-roboto">
                    <i class="fa fa-address-card mr-3 text-primary fa-fw"></i>
                    Users
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/categories}" class="nav-link text-dark ">
                    <i class="fa fa-cubes mr-3 text-primary fa-fw"></i>
                    Categories
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/brands}" class="nav-link text-dark">
                    <i class="fa fa-picture-o mr-3 text-primary fa-fw"></i>
                    Brands
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/products}" class="nav-link text-dark">
                    <i class="fas fa-store-alt mr-3 text-primary fa-fw"></i>
                    Products
                </a>
            </li>

            <li class="nav-item">
                <a href="@{/admin/customers}" class="nav-link text-dark">
                    <i class="far fa-address-card mr-3 text-primary fa-fw"></i>
                    Customers
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/ship}" class="nav-link text-dark">
                    <i class="bi bi-truck mr-3 text-primary fa-fw"></i>
                    Ship
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/report}" class="nav-link text-dark">
                    <i class="bi bi-chat-right-text mr-3 text-primary fa-fw"></i>
                    Report
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/customers}" class="nav-link text-dark">
                    <i class="far fa-address-card mr-3 text-primary fa-fw"></i>
                    Customers
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/orders}" class="nav-link text-dark">
                    <i class="fab fa-shopify mr-3 text-primary fa-fw"></i>
                    Orders
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/articles}" class="nav-link text-dark ">
                    <i class="fas fa-clipboard mr-3 text-primary fa-fw"></i>
                    Articles
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/menu}" class="nav-link text-dark ">
                    <i class="bi bi-three-dots-vertical mr-3 text-primary fa-fw"></i>
                    Menu
                </a>
            </li>
            <li class="nav-item">
                <a href="@{/admin/setting}" class="nav-link text-dark">
                    <i class="bi bi-sliders mr-3 text-primary fa-fw"></i>
                    Setting
                </a>
            </li>
        </ul>

        <p class="text-gray font-weight-bold text-uppercase px-3 small py-4 mb-0">Charts</p>

        <ul class="nav flex-column bg-white mb-0">
            <li class="nav-item">
                <a href="#" class="nav-link text-dark font-italic">
                    <i class="fa fa-area-chart mr-3 text-primary fa-fw"></i>
                    Area charts
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link text-dark font-italic">
                    <i class="fa fa-bar-chart mr-3 text-primary fa-fw"></i>
                    Bar charts
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link text-dark font-italic">
                    <i class="fa fa-pie-chart mr-3 text-primary fa-fw"></i>
                    Pie charts
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link text-dark font-italic">
                    <i class="fa fa-line-chart mr-3 text-primary fa-fw"></i>
                    Line charts
                </a>
            </li>
        </ul>
    </div>
    <!-- End vertical navbar -->

    <!-- Page content holder -->
    <div class="page-content p-5" id="content">
        <!-- Toggle button -->
        <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"><i class="fa fa-bars mr-2"></i><small class="text-uppercase font-weight-bold" ></small></button>
    </div>

    <div class="page-content p-5" id="content1">
        <div>
            <h2>Manage Ecommerce</h2>
        </div>
        <div>

        </div>
        <div class="container-fluid">
            <a th:href="@{/admin/users/createuser}">
                <button>Create new user</button>
            </a>
        </div>

        <div>
            <h1></h1>
        </div>

        <div th:if="${message !=null}" class="alert alert-success text-center">
            [[${message}]]
        </div>

        <div th:if="${message1 !=null}" class="alert alert-danger text-center">
            [[${message1}]]
        </div>

        <div class="container-fluid">
            <table class="table table-bordered table-striped table-hover table-responsive-lg" >
                <thead class="thead-dark">
                <tr>
                    <th>User ID</th>
                    <th>Photos</th>
                    <th>Email</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Phone Number</th>
                    <th>Roles</th>
                    <th>Enabled</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="users : ${userlist}">
                    <td><h5>[[${users.userId}]]</h5></td>
                    <td><img src="https://firebasestorage.googleapis.com/v0/b/driveupload-a0a7b.appspot.com/o/manhoke.jpg?alt=media&token=6798e7a3-50a6-4ec2-bf0a-23e8af1e3706" alt="..." class="img-thumbnail" width="150px"></td>
                    <td><h5>[[${users.email}]]</h5></td>
                    <td><h5>[[${users.firstName}]]</h5></td>
                    <td><h5>[[${users.lastName}]]</h5></td>
                    <td><h5>[[${users.phoneNumber}]]</h5></td>
                    <td><h5>[[${users.toString}]]</h5></td>
                    <td class="icon">

                        <a th:if="${users.enabled ==true} " class="bi bi-toggle2-on fa-2x" style="color: green" th:href="@{'/admin/users/enabled/' + ${users.userId} + '/false' }"></a>
                        <a th:if="${users.enabled ==false}" class="bi bi-toggle2-off fa-2x" style="color: gray" th:href="@{'/admin/users/enabled/' + ${users.userId} + '/true' }"></a>
                    </td>
                    <td>
                        <a class="bi bi-pencil-square fa-2x icon-dark" th:href="@{'/admin/users/edit/' + ${users.userId}}"></a>
                        <a class="bi bi-trash fa-2x icon-dark link-delete"
                           th:href="@{'/admin/users/delete/' +${users.userId}}"
                            th:userId="${users.userId}"></a>

                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal fade text-center" id="confirmModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete Confirmation</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <span id="confirmText"></span>
                </div>

                <div class="modal-footer">
                    <a class="btn btn-success" href="" id="yesButton">Yes</a>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
                </div>
            </div>
        </div>

    </div>
        <div class="text-center">
            <p>Ecommerce Udemy Shop - Copyright &copy;Ecommerce</p>
        </div>
    </div>
</div>
</body>

<script>
    $(function() {
        // Sidebar toggle behavior
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar, #content,#content1').toggleClass('active');
        });
    });

    $(document).ready(function (){
        $(".link-delete").on("click",function (e){
            e.preventDefault();
            link=$(this);

            userId=link.attr("userId")
            $("#yesButton").attr("href", link.attr("href"));
            $("#confirmText").text("Are you sure you want to delete this user ID " +userId);
            $("#confirmModal").modal();
        })
    })
</script>
</html>